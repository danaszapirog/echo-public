# =============================================================================
# Project Echo - Environment Variables Example
# =============================================================================
# Copy this file to .env in the backend/ directory and fill in your actual values
# DO NOT commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
API_BASE_URL=http://localhost:3000
API_VERSION=v1

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
# Local development database URL
DATABASE_URL=postgresql://echo_user:echo_password@localhost:5432/echo_dev

# Test database URL (for running tests)
DATABASE_TEST_URL=postgresql://echo_user:echo_password@localhost:5432/echo_test

# Production database URL (set in production environment)
# DATABASE_URL=postgresql://user:password@host:5432/echo_prod

# -----------------------------------------------------------------------------
# Redis Configuration (Caching & Sessions)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Production Redis URL (if using managed Redis)
# REDIS_URL=redis://:password@host:6379

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Generate a strong random secret: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# -----------------------------------------------------------------------------
# Password Hashing (bcrypt)
# -----------------------------------------------------------------------------
BCRYPT_SALT_ROUNDS=12

# -----------------------------------------------------------------------------
# AWS Configuration (S3 for Media Storage & CloudFront CDN)
# -----------------------------------------------------------------------------
# These values are created automatically by CDK (see infrastructure/README.md)
# After deploying CDK stack, get these values from CDK outputs:
# 1. Deploy: cd infrastructure && npm install && cdk bootstrap && npm run deploy:dev
# 2. Create IAM access keys: AWS Console → IAM → Users → echo-backend-dev → Security Credentials
# 3. Get bucket name and CloudFront domain from CDK outputs
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id-from-iam-user
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key-from-iam-user
AWS_S3_BUCKET_NAME=echo-media-dev
AWS_S3_BUCKET_REGION=us-east-1

# CloudFront distribution URL (created automatically by CDK)
AWS_CLOUDFRONT_DOMAIN=your-cloudfront-domain-from-cdk-output.cloudfront.net

# -----------------------------------------------------------------------------
# Mapbox (Map Visualization)
# -----------------------------------------------------------------------------
# Get your access token from: https://account.mapbox.com/access-tokens/
MAPBOX_ACCESS_TOKEN=your-mapbox-access-token

# -----------------------------------------------------------------------------
# Foursquare Places API (Place Data)
# -----------------------------------------------------------------------------
# Get API key from: https://developer.foursquare.com/
# Places API v3 uses API key authentication (not OAuth)
# Generate an API key in your Foursquare developer dashboard
# Note: OAuth Client ID/Secret are only needed for Personalization API (not used in MVP)
FOURSQUARE_API_KEY=your-foursquare-api-key
# FOURSQUARE_API_SECRET=not-needed-for-places-api-v3
FOURSQUARE_API_VERSION=20240101

# -----------------------------------------------------------------------------
# OAuth - Google/Apple Sign-In (v1.1 - Not needed for MVP)
# -----------------------------------------------------------------------------
# These variables are reserved for v1.1 when social sign-in is implemented
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-google-client-secret
# APPLE_CLIENT_ID=com.echo.app
# APPLE_TEAM_ID=your-apple-team-id
# APPLE_KEY_ID=your-apple-key-id
# APPLE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----

# -----------------------------------------------------------------------------
# Email Configuration (Optional for MVP - for password reset, etc.)
# -----------------------------------------------------------------------------
# SMTP configuration for sending emails
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USER=your-email@gmail.com
# EMAIL_PASSWORD=your-app-password
# EMAIL_FROM=noreply@echo.app

# Or use a service like SendGrid, AWS SES, etc.
# SENDGRID_API_KEY=your-sendgrid-api-key
# AWS_SES_REGION=us-east-1

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
# Maximum file size for image uploads (in bytes)
# 5MB = 5242880 bytes
MAX_FILE_SIZE=5242880

# Allowed image file types
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,webp

# Maximum number of photos per spot
MAX_PHOTOS_PER_SPOT=5

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Rate limit per user (requests per minute)
RATE_LIMIT_PER_USER=100

# Rate limit per IP (requests per minute for unauthenticated endpoints)
RATE_LIMIT_PER_IP=20

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins (comma-separated)
# For development, allow localhost
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# Production origins (add your production domains)
# CORS_ORIGINS=https://echo.app,https://www.echo.app

# -----------------------------------------------------------------------------
# Logging & Monitoring (Optional for MVP)
# -----------------------------------------------------------------------------
# Log level: error, warn, info, debug
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=your-sentry-dsn

# DataDog API key (optional)
# DATADOG_API_KEY=your-datadog-api-key

# -----------------------------------------------------------------------------
# Feature Flags (Optional)
# -----------------------------------------------------------------------------
# Enable/disable features
ENABLE_GOOGLE_SIGN_IN=false
ENABLE_APPLE_SIGN_IN=false
ENABLE_IMAGE_UPLOAD=true

# -----------------------------------------------------------------------------
# Development/Testing
# -----------------------------------------------------------------------------
# Seed database on startup (development only)
SEED_DATABASE=false

# Enable API documentation (Swagger/OpenAPI)
ENABLE_API_DOCS=true

# -----------------------------------------------------------------------------
# Production-Specific (Set in Production Environment)
# -----------------------------------------------------------------------------
# SSL/TLS Configuration
# FORCE_HTTPS=true

# Domain configuration
# DOMAIN=echo.app
# API_DOMAIN=api.echo.app

# CDN configuration
# CDN_URL=https://cdn.echo.app

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. Never commit .env file to version control
# 2. Use different values for development, staging, and production
# 3. Rotate secrets regularly, especially in production
# 4. Use a secrets management service (AWS Secrets Manager, etc.) in production
# 5. For production, set NODE_ENV=production
# 6. Generate strong random secrets using: openssl rand -base64 32

